<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>88ë§ˆì¼“ - ê³ ê°ì„¼í„°</title>
    <!-- FAQ CSS -->
    <link rel="stylesheet" th:href="@{/css/user/serviceCenter.css}">
    <!-- ì™¸ë¶€íŒŒì¼(jQuery, Font Awesome, íŒŒë¹„ì½˜ ë“±) -->
    <th:block th:replace="~{components/user/external :: external}"></th:block>
</head>
<script>
    $(function () {
        // URLì—ì„œ type íŒŒë¼ë¯¸í„° ê°’ì„ ê°€ì ¸ì˜¤ê¸°
        var selectedType = '';
        var urlParams = new URLSearchParams(window.location.search);
        selectedType = urlParams.get('type') || '';
        
        // ì„ íƒëœ ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
        if (selectedType) {
            $('.faq-categories button').each(function() {
                if ($(this).text() === selectedType) {
                    $(this).addClass('active');
                }
            });
        } else {
            // typeì´ ì—†ìœ¼ë©´ 'ì „ì²´' ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            $('.faq-categories button:first').addClass('active');
        }
        

        $("#faq-accordion").accordion({
            collapsible: true,
            active: false,
            heightStyle: "content",
            icons: {
                header: "ui-icon-triangle-1-e",
                activeHeader: "ui-icon-triangle-1-s"
            }
        });// click
    });// ready

    function faqType(type) {
        location.href = '/serviceCenter?type=' + type;
    }

    function faqSearch(keyword) {
        location.href = '/serviceCenter?keyword=' + keyword;
    }
</script>
<body>
    <!-- í—¤ë” -->
    <th:block th:insert="~{components/user/header :: header}"></th:block>

    <!-- ë©”ì¸ ì½˜í…ì¸  (FAQ) -->
    <main class="faq-content">
        <h2 th:onclick="|location.href='@{/serviceCenter}'|" style="cursor: pointer;">ê³ ê°ì„¼í„°</h2>
        <hr>
        <h3>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ FAQ</h3>
        <div class="faq-search">
            <span>ğŸ”</span>
            <input type="text" placeholder="ê¶ê¸ˆí•˜ì‹  ì ì„ ê²€ìƒ‰í•´ì£¼ì„¸ìš”." th:value="${keyword}" th:onchange="faqSearch(this.value)">
        </div>
        <div class="faq-categories" th:if="${!typeButtonHide}">
            <button th:onclick="faqType('')">ì „ì²´</button>
            <button th:onclick="faqType('ê±°ë˜ë¬¸ì˜')">ê±°ë˜ë¬¸ì˜</button>
            <button th:onclick="faqType('ì´ìš©ë¬¸ì˜')">ì´ìš©ë¬¸ì˜</button>
            <button th:onclick="faqType('íšŒì›/ê³„ì •')">íšŒì›/ê³„ì •</button>
            <button th:onclick="faqType('ìš´ì˜ì •ì±…')">ìš´ì˜ì •ì±…</button>
            <button th:onclick="faqType('ê¸°íƒ€')">ê¸°íƒ€</button>
        </div>
        <th:block th:if="${faqList.size() == 0}">
            <img src="/images/no_result.png" alt="ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.">
            <h2>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</h2>
        </th:block>
        <div id="faq-accordion" class="faq-list">
            <th:block th:each="faq : ${faqList}">
                <h3>
                    <div class="faq-header-row">
                        <div class="faq-header-left">
                            <div class="faq-title" th:text="${faq.title}">ì§ˆë¬¸ ì œëª©</div>
                            <div class="faq-category" th:text="${faq.faqType}">ì¹´í…Œê³ ë¦¬</div>
                        </div>
                    </div>
                </h3>
                <div style="text-align: center;">
                    <div class="faq-detail" th:utext="${faq.content}">ë‹µë³€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</div>
                </div>
            </th:block>
        </div>
        <div class="inquiry-buttons">
            <button class="inquiry-btn" id="inquiryBtn">1:1 ë¬¸ì˜</button>
            <button class="inquiry-history-btn" id="inquiryListBtn">ë¬¸ì˜ë‚´ì—­</button>
        </div>
    </main>

	<!-- 1:1ë¬¸ì˜í•˜ê¸° ì˜¤ë²„ë ˆì´ -->
	<th:block th:insert="~{components/user/inquiryOverlay :: inquiryOverlay}"></th:block>

    <!-- ë¬¸ì˜ë‚´ì—­ ì˜¤ë²„ë ˆì´ -->
    <th:block th:insert="~{components/user/inquiryListOverlay :: inquiryListOverlay}"></th:block>

    <!-- í‘¸í„° -->
    <th:block th:insert="~{components/user/footer :: footer}"></th:block>

</body>
</html>